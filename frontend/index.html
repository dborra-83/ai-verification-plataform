<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Verification Platform - Dashboard</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/styles.css" rel="stylesheet">
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Chart.js for advanced analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.js"></script>
    <!-- Chart.js fallback -->
    <script>
        // Fallback CDN if primary fails
        if (typeof Chart === 'undefined') {
            document.write('<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.min.js"><\/script>');
        }
    </script>
    <!-- jsPDF for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- html2canvas for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- Configuration -->
    <script src="config.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1><i class="bi bi-shield-check me-2"></i>AI Verification</h1>
                <p>Plataforma de Verificaci√≥n</p>
            </div>

            <div class="sidebar-nav">
                <a href="index.html" class="nav-item active">
                    <i class="bi bi-speedometer2"></i>
                    Dashboard
                </a>
                <a href="#" class="nav-item" onclick="showUploadSection()">
                    <i class="bi bi-cloud-upload"></i>
                    Nuevo An√°lisis
                </a>
                <a href="#" class="nav-item" onclick="showHistorySection()">
                    <i class="bi bi-clock-history"></i>
                    Historial
                </a>
                <a href="#" class="nav-item" onclick="showAnalyticsSection()">
                    <i class="bi bi-graph-up"></i>
                    Analytics
                </a>
                <a href="#" class="nav-item" onclick="showSettingsSection()">
                    <i class="bi bi-gear"></i>
                    Configuraci√≥n
                </a>
                <hr style="border-color: rgba(255,255,255,0.2); margin: 1rem 1.5rem;">
                <a href="#" class="nav-item" onclick="logout()">
                    <i class="bi bi-box-arrow-right"></i>
                    Cerrar Sesi√≥n
                </a>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Topbar -->
            <div class="topbar">
                <h2 id="pageTitle">Dashboard</h2>
                <div class="topbar-actions">
                    <div class="search-box">
                        <i class="bi bi-search"></i>
                        <input type="text" placeholder="Buscar an√°lisis..." id="searchInput">
                    </div>
                    <div class="user-avatar" title="Admin">
                        A
                    </div>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Dashboard Section -->
                <div id="dashboardSection">
                    <!-- KPI Cards -->
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body kpi-card">
                                    <h3 class="kpi-value" id="totalAnalyses">-</h3>
                                    <p class="kpi-label">Total An√°lisis</p>
                                    <small class="kpi-trend text-muted">√öltimos 30 d√≠as</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body kpi-card">
                                    <h3 class="kpi-value" id="avgAiScore">-</h3>
                                    <p class="kpi-label">Promedio IA Score</p>
                                    <small class="kpi-trend text-muted">√öltimos 30 d√≠as</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body kpi-card">
                                    <h3 class="kpi-value text-success" id="systemStatus">Activo</h3>
                                    <p class="kpi-label">Estado del Sistema</p>
                                    <small class="kpi-trend trend-up">
                                        <i class="bi bi-check-circle me-1"></i>Operativo
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Additional KPIs -->
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="card">
                                <div class="card-body kpi-card">
                                    <h3 class="kpi-value text-warning" id="highRiskCount">-</h3>
                                    <p class="kpi-label">Alto Riesgo IA</p>
                                    <small class="kpi-trend text-muted">Score > 70%</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card">
                                <div class="card-body kpi-card">
                                    <h3 class="kpi-value text-info" id="avgOriginalityScore">-</h3>
                                    <p class="kpi-label">Promedio Originalidad</p>
                                    <small class="kpi-trend text-muted">√öltimos 30 d√≠as</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card">
                                <div class="card-body kpi-card">
                                    <h3 class="kpi-value text-primary" id="todayAnalyses">-</h3>
                                    <p class="kpi-label">An√°lisis Hoy</p>
                                    <small class="kpi-trend text-muted">√öltimas 24 horas</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card">
                                <div class="card-body kpi-card">
                                    <h3 class="kpi-value text-success" id="avgConfidence">-</h3>
                                    <p class="kpi-label">Confianza Promedio</p>
                                    <small class="kpi-trend text-muted">Precisi√≥n del an√°lisis</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="row mb-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">
                                        <i class="bi bi-plus-circle me-2"></i>
                                        Nuevo An√°lisis
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col-md-8">
                                            <p class="text-muted mb-3">Sube un documento PDF para analizar el uso de IA
                                                con tecnolog√≠a Amazon Bedrock Claude 3.5 Sonnet</p>
                                            <button class="btn btn-primary" onclick="showUploadSection()">
                                                <i class="bi bi-cloud-upload me-2"></i>
                                                Subir Documento
                                            </button>
                                        </div>
                                        <div class="col-md-4 text-center">
                                            <div class="d-flex justify-content-center align-items-center">
                                                <div class="me-3">
                                                    <i class="bi bi-robot"
                                                        style="font-size: 2rem; color: var(--ch-blue);"></i>
                                                </div>
                                                <div class="text-start">
                                                    <small class="text-muted">Powered by</small><br>
                                                    <strong>Amazon Bedrock</strong><br>
                                                    <small class="text-muted">Claude 3.5 Sonnet</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- New Features Info Banner -->
                    <div class="row mb-3">
                        <div class="col-md-12">
                            <div class="alert alert-primary">
                                <div class="row align-items-center">
                                    <div class="col-md-8">
                                        <i class="bi bi-lightbulb me-2"></i>
                                        <strong>üí° Nuevas Funcionalidades:</strong>
                                        Usa el bot√≥n <span class="badge bg-info">Tags</span> para etiquetar an√°lisis,
                                        <span class="badge bg-success">Analytics</span> para gr√°ficos avanzados, y
                                        <kbd>F1</kbd> para ver todos los atajos de teclado.
                                    </div>
                                    <div class="col-md-4 text-end">
                                        <button class="btn btn-outline-primary btn-sm me-2"
                                            onclick="showAnalyticsSection()">
                                            <i class="bi bi-graph-up me-1"></i>Analytics
                                        </button>
                                        <button class="btn btn-outline-info btn-sm" onclick="showHelpModal()">
                                            <i class="bi bi-question-circle me-1"></i>Ayuda
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Analyses -->
                    <div class="card">
                        <div class="card-header">
                            <div class="row align-items-center">
                                <div class="col">
                                    <h5 class="mb-0">
                                        <i class="bi bi-clock-history me-2"></i>
                                        An√°lisis Recientes
                                    </h5>
                                </div>
                                <div class="col-auto">
                                    <div class="btn-group btn-group-sm">
                                        <button class="btn btn-outline-primary" onclick="exportDashboardToPDF()"
                                            title="Exportar Dashboard a PDF">
                                            <i class="bi bi-file-earmark-pdf"></i>
                                        </button>
                                        <button class="btn btn-outline-success" onclick="exportDashboardToExcel()"
                                            title="Exportar Datos a Excel">
                                            <i class="bi bi-file-earmark-excel"></i>
                                        </button>
                                        <button class="btn btn-outline-info" onclick="showAnalyticsSection()"
                                            title="Ver Analytics Avanzados">
                                            <i class="bi bi-graph-up"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Estudiante</th>
                                            <th>Curso</th>
                                            <th>Fecha</th>
                                            <th>IA Score</th>
                                            <th>Estado</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="recentAnalysesTable">
                                        <tr>
                                            <td colspan="6" class="text-center text-muted">
                                                <i class="bi bi-hourglass-split me-2"></i>
                                                Cargando an√°lisis recientes...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Upload Section -->
                <div id="uploadSection" style="display: none;">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">
                                        <i class="bi bi-cloud-upload me-2"></i>
                                        Subir Documento para An√°lisis
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <form id="uploadForm">
                                        <!-- Upload Zone -->
                                        <div class="upload-zone mb-4" id="uploadZone">
                                            <div class="upload-icon">
                                                <i class="bi bi-cloud-upload"></i>
                                            </div>
                                            <div class="upload-text">
                                                Arrastra tu archivo PDF aqu√≠
                                            </div>
                                            <div class="upload-subtext">
                                                o haz clic para seleccionar archivo
                                            </div>
                                            <input type="file" id="fileInput" accept=".pdf" style="display: none;">
                                        </div>

                                        <!-- File Info -->
                                        <div id="fileInfo" style="display: none;" class="alert alert-info mb-4">
                                            <i class="bi bi-file-earmark-pdf me-2"></i>
                                            <span id="fileName"></span>
                                            <button type="button" class="btn-close float-end"
                                                onclick="clearFile()"></button>
                                        </div>

                                        <!-- Metadata Form -->
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="studentName" class="form-label">Nombre del Estudiante
                                                        *</label>
                                                    <input type="text" class="form-control" id="studentName" required>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="studentId" class="form-label">ID del Estudiante</label>
                                                    <input type="text" class="form-control" id="studentId">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="course" class="form-label">Curso *</label>
                                                    <input type="text" class="form-control" id="course" required>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="subject" class="form-label">Materia</label>
                                                    <input type="text" class="form-control" id="subject">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="mb-4">
                                            <label for="assignmentName" class="form-label">Nombre de la Tarea *</label>
                                            <input type="text" class="form-control" id="assignmentName" required>
                                        </div>

                                        <div class="d-flex gap-2">
                                            <button type="submit" class="btn btn-primary" id="analyzeBtn" disabled>
                                                <i class="bi bi-play-circle me-2"></i>
                                                Iniciar An√°lisis
                                            </button>
                                            <button type="button" class="btn btn-secondary" onclick="showDashboard()">
                                                <i class="bi bi-arrow-left me-2"></i>
                                                Volver al Dashboard
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">
                                        <i class="bi bi-info-circle me-2"></i>
                                        Informaci√≥n
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <h6>Formatos Soportados</h6>
                                    <ul class="list-unstyled">
                                        <li><i class="bi bi-check-circle text-success me-2"></i>PDF con texto</li>
                                        <li><i class="bi bi-exclamation-circle text-warning me-2"></i>PDF escaneado
                                            (limitado)</li>
                                    </ul>

                                    <h6 class="mt-3">Proceso de An√°lisis</h6>
                                    <ol class="small">
                                        <li>Extracci√≥n de texto del PDF</li>
                                        <li>An√°lisis con Amazon Bedrock</li>
                                        <li>Generaci√≥n de informe</li>
                                        <li>Almacenamiento de resultados</li>
                                    </ol>

                                    <div class="alert alert-warning mt-3">
                                        <small>
                                            <i class="bi bi-exclamation-triangle me-1"></i>
                                            Los PDFs escaneados requieren OCR (Fase 2)
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- History Section -->
                <div id="historySection" style="display: none;">
                    <div class="card">
                        <div class="card-header">
                            <div class="row align-items-center">
                                <div class="col">
                                    <h5 class="mb-0">
                                        <i class="bi bi-clock-history me-2"></i>
                                        Historial de An√°lisis
                                    </h5>
                                </div>
                                <div class="col-auto">
                                    <button class="btn btn-secondary" onclick="showDashboard()">
                                        <i class="bi bi-arrow-left me-2"></i>
                                        Volver al Dashboard
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <!-- Filters -->
                            <div class="row mb-3">
                                <div class="col-md-2">
                                    <label for="filterCourse" class="form-label">Curso</label>
                                    <select class="form-select" id="filterCourse">
                                        <option value="">Todos los cursos</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label for="filterTag" class="form-label">Etiqueta</label>
                                    <select class="form-select" id="filterTag">
                                        <option value="">Todas las etiquetas</option>
                                        <option value="sospechoso">üö® Sospechoso</option>
                                        <option value="revisado">‚úÖ Revisado</option>
                                        <option value="aprobado">üëç Aprobado</option>
                                        <option value="rechazado">‚ùå Rechazado</option>
                                        <option value="pendiente">‚è≥ Pendiente</option>
                                        <option value="favorito">‚≠ê Favorito</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label for="filterFrom" class="form-label">Desde</label>
                                    <input type="date" class="form-control" id="filterFrom">
                                </div>
                                <div class="col-md-2">
                                    <label for="filterTo" class="form-label">Hasta</label>
                                    <input type="date" class="form-control" id="filterTo">
                                </div>
                                <div class="col-md-2">
                                    <label for="searchText" class="form-label">Buscar</label>
                                    <input type="text" class="form-control" id="searchText"
                                        placeholder="Nombre, curso...">
                                </div>
                                <div class="col-md-2 d-flex align-items-end">
                                    <button class="btn btn-primary w-100" onclick="applyFilters()">
                                        <i class="bi bi-funnel me-2"></i>
                                        Filtrar
                                    </button>
                                </div>
                            </div>

                            <!-- Tag Management Info -->
                            <div class="row mb-3">
                                <div class="col-md-12">
                                    <div class="alert alert-info">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <i class="bi bi-tags me-2"></i>
                                                <strong>üí° Gesti√≥n de Etiquetas:</strong> Haz clic en el bot√≥n <span
                                                    class="badge bg-info">Tags</span> de cualquier an√°lisis para agregar
                                                etiquetas personalizadas
                                            </div>
                                            <button class="btn btn-outline-primary btn-sm"
                                                onclick="showTagStatistics()">
                                                <i class="bi bi-bar-chart me-1"></i>
                                                Ver Estad√≠sticas
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- History Table -->
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Estudiante</th>
                                            <th>Curso</th>
                                            <th>Tarea</th>
                                            <th>Fecha</th>
                                            <th>IA Score</th>
                                            <th>Originalidad</th>
                                            <th>Estado</th>
                                            <th>Etiquetas</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="historyTable">
                                        <tr>
                                            <td colspan="9" class="text-center text-muted">
                                                <i class="bi bi-hourglass-split me-2"></i>
                                                Cargando historial...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Pagination -->
                            <nav aria-label="Paginaci√≥n del historial">
                                <ul class="pagination justify-content-center" id="historyPagination">
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>

                <!-- Analytics Section -->
                <div id="analyticsSection" style="display: none;">
                    <div class="row mb-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <h5 class="mb-0">
                                                <i class="bi bi-graph-up me-2"></i>
                                                Analytics Avanzados
                                            </h5>
                                        </div>
                                        <div class="col-auto">
                                            <div class="btn-group btn-group-sm">
                                                <button class="btn btn-outline-primary" onclick="exportAnalyticsToPDF()"
                                                    title="Exportar Analytics a PDF">
                                                    <i class="bi bi-file-earmark-pdf me-1"></i>PDF
                                                </button>
                                                <button class="btn btn-outline-success"
                                                    onclick="exportAnalyticsToExcel()" title="Exportar Datos a Excel">
                                                    <i class="bi bi-file-earmark-excel me-1"></i>Excel
                                                </button>
                                                <button class="btn btn-secondary" onclick="showDashboard()">
                                                    <i class="bi bi-arrow-left me-2"></i>
                                                    Volver al Dashboard
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <!-- Time Period Selector -->
                                    <div class="row mb-4">
                                        <div class="col-md-4">
                                            <label for="analyticsPeriod" class="form-label">Per√≠odo de An√°lisis</label>
                                            <select class="form-select" id="analyticsPeriod"
                                                onchange="loadAnalyticsData()">
                                                <option value="7">√öltimos 7 d√≠as</option>
                                                <option value="30" selected>√öltimos 30 d√≠as</option>
                                                <option value="90">√öltimos 90 d√≠as</option>
                                                <option value="180">√öltimos 6 meses</option>
                                            </select>
                                        </div>
                                        <div class="col-md-8 d-flex align-items-end">
                                            <button class="btn btn-primary" onclick="loadAnalyticsData()">
                                                <i class="bi bi-arrow-clockwise me-2"></i>
                                                Actualizar Datos
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Row 1 -->
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">
                                        <i class="bi bi-bar-chart me-2"></i>
                                        Tendencia de An√°lisis
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <canvas id="analysisTimeChart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">
                                        <i class="bi bi-pie-chart me-2"></i>
                                        Distribuci√≥n de Riesgo IA
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <canvas id="riskDistributionChart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Row 2 -->
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">
                                        <i class="bi bi-graph-up me-2"></i>
                                        Promedio de Scores por Curso
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <canvas id="courseScoresChart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">
                                        <i class="bi bi-speedometer2 me-2"></i>
                                        Confianza vs Originalidad
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <canvas id="confidenceOriginalityChart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Top Rankings -->
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">
                                        <i class="bi bi-trophy me-2"></i>
                                        Top 10 Cursos por Actividad
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-sm">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Curso</th>
                                                    <th>An√°lisis</th>
                                                    <th>Promedio IA</th>
                                                </tr>
                                            </thead>
                                            <tbody id="topCoursesTable">
                                                <tr>
                                                    <td colspan="4" class="text-center text-muted">
                                                        <i class="bi bi-hourglass-split me-2"></i>
                                                        Cargando datos...
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">
                                        <i class="bi bi-person-check me-2"></i>
                                        Top 10 Estudiantes por Originalidad
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-sm">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Estudiante</th>
                                                    <th>Curso</th>
                                                    <th>Originalidad</th>
                                                </tr>
                                            </thead>
                                            <tbody id="topStudentsTable">
                                                <tr>
                                                    <td colspan="4" class="text-center text-muted">
                                                        <i class="bi bi-hourglass-split me-2"></i>
                                                        Cargando datos...
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Section -->
                <div id="settingsSection" style="display: none;">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <h5 class="mb-0">
                                                <i class="bi bi-gear me-2"></i>
                                                Configuraci√≥n
                                            </h5>
                                        </div>
                                        <div class="col-auto">
                                            <button class="btn btn-secondary" onclick="showDashboard()">
                                                <i class="bi bi-arrow-left me-2"></i>
                                                Volver al Dashboard
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <form id="settingsForm">
                                        <!-- Dashboard Settings -->
                                        <div class="mb-4">
                                            <h6 class="text-primary mb-3">
                                                <i class="bi bi-speedometer2 me-2"></i>
                                                Configuraci√≥n del Dashboard
                                            </h6>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="kpiPeriod" class="form-label">Per√≠odo de
                                                            KPIs</label>
                                                        <select class="form-select" id="kpiPeriod">
                                                            <option value="7">√öltimos 7 d√≠as</option>
                                                            <option value="15">√öltimos 15 d√≠as</option>
                                                            <option value="30" selected>√öltimos 30 d√≠as</option>
                                                            <option value="90">√öltimos 90 d√≠as</option>
                                                        </select>
                                                        <small class="text-muted">Per√≠odo para calcular las m√©tricas del
                                                            dashboard</small>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="itemsPerPage" class="form-label">Elementos por
                                                            P√°gina</label>
                                                        <select class="form-select" id="itemsPerPage">
                                                            <option value="5" selected>5 elementos</option>
                                                            <option value="10">10 elementos</option>
                                                            <option value="20">20 elementos</option>
                                                            <option value="50">50 elementos</option>
                                                        </select>
                                                        <small class="text-muted">N√∫mero de an√°lisis mostrados en las
                                                            tablas</small>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="highRiskThreshold" class="form-label">Umbral Alto
                                                            Riesgo IA</label>
                                                        <select class="form-select" id="highRiskThreshold">
                                                            <option value="60">60% o m√°s</option>
                                                            <option value="70" selected>70% o m√°s</option>
                                                            <option value="80">80% o m√°s</option>
                                                        </select>
                                                        <small class="text-muted">Score m√≠nimo para considerar "Alto
                                                            Riesgo"</small>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label class="form-label">Actualizaci√≥n Autom√°tica</label>
                                                        <div class="form-check form-switch">
                                                            <input class="form-check-input" type="checkbox"
                                                                id="autoRefresh" checked>
                                                            <label class="form-check-label" for="autoRefresh">
                                                                Actualizar dashboard autom√°ticamente
                                                            </label>
                                                        </div>
                                                        <small class="text-muted">Actualiza los KPIs cada 2
                                                            minutos</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Interface Settings -->
                                        <div class="mb-4">
                                            <h6 class="text-primary mb-3">
                                                <i class="bi bi-palette me-2"></i>
                                                Configuraci√≥n de Interfaz
                                            </h6>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="theme" class="form-label">Tema</label>
                                                        <select class="form-select" id="theme">
                                                            <option value="light" selected>Claro</option>
                                                            <option value="dark">Oscuro</option>
                                                            <option value="auto">Autom√°tico</option>
                                                        </select>
                                                        <small class="text-muted">Apariencia de la interfaz</small>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="fontSize" class="form-label">Tama√±o de
                                                            Fuente</label>
                                                        <select class="form-select" id="fontSize">
                                                            <option value="normal" selected>Normal</option>
                                                            <option value="large">Grande</option>
                                                        </select>
                                                        <small class="text-muted">Tama√±o del texto en la
                                                            interfaz</small>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label class="form-label">Animaciones</label>
                                                        <div class="form-check form-switch">
                                                            <input class="form-check-input" type="checkbox"
                                                                id="animations" checked>
                                                            <label class="form-check-label" for="animations">
                                                                Activar animaciones y transiciones
                                                            </label>
                                                        </div>
                                                        <small class="text-muted">Efectos visuales en la
                                                            interfaz</small>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label class="form-label">Sonidos</label>
                                                        <div class="form-check form-switch">
                                                            <input class="form-check-input" type="checkbox" id="sounds">
                                                            <label class="form-check-label" for="sounds">
                                                                Activar sonidos de notificaci√≥n
                                                            </label>
                                                        </div>
                                                        <small class="text-muted">Sonidos para alertas y
                                                            confirmaciones</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Action Buttons -->
                                        <div class="d-flex gap-2">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="bi bi-check-circle me-2"></i>
                                                Guardar Configuraci√≥n
                                            </button>
                                            <button type="button" class="btn btn-outline-secondary"
                                                onclick="resetSettings()">
                                                <i class="bi bi-arrow-clockwise me-2"></i>
                                                Restaurar Predeterminados
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">
                                        <i class="bi bi-info-circle me-2"></i>
                                        Informaci√≥n del Sistema
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <small class="text-muted">Versi√≥n de la Plataforma</small>
                                        <div class="fw-medium">v1.0.0</div>
                                    </div>

                                    <div class="mb-3">
                                        <small class="text-muted">Modelo de IA</small>
                                        <div class="fw-medium">Claude 3.5 Sonnet</div>
                                    </div>

                                    <div class="mb-3">
                                        <small class="text-muted">Regi√≥n AWS</small>
                                        <div class="fw-medium">us-east-1</div>
                                    </div>

                                    <div class="mb-3">
                                        <small class="text-muted">Estado del Sistema</small>
                                        <div class="fw-medium text-success">
                                            <i class="bi bi-check-circle me-1"></i>
                                            Operativo
                                        </div>
                                    </div>

                                    <hr>

                                    <div class="mb-3">
                                        <small class="text-muted">Configuraci√≥n Guardada</small>
                                        <div class="fw-medium" id="lastSaved">
                                            <i class="bi bi-clock me-1"></i>
                                            Nunca
                                        </div>
                                    </div>

                                    <div class="alert alert-info">
                                        <small>
                                            <i class="bi bi-info-circle me-1"></i>
                                            La configuraci√≥n se guarda localmente en tu navegador.
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="js/app.js"></script>
    <script src="js/upload.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/analytics.js"></script>
    <script src="js/tags.js"></script>
    <script src="js/ux-enhancements.js"></script>
</body>

</html>